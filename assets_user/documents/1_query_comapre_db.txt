
-- Set variables

SET @db1 = 'maiya_hrms';

SET @db2 = 'eagle_db';

-- 1. Display tables present in the first database but not in the second

SELECT table_name

FROM information_schema.tables

WHERE table_schema = @db1

  AND table_name NOT IN (

    SELECT table_name

    FROM information_schema.tables

    WHERE table_schema = @db2

  );

-- 2. Display tables present in the second database but not in the first

SELECT table_name

FROM information_schema.tables

WHERE table_schema = @db2

  AND table_name NOT IN (

    SELECT table_name

    FROM information_schema.tables

    WHERE table_schema = @db1

  );

-- 3. Display columns with data type differences in tables that exist in both databases

SELECT t1.table_name, t1.column_name, t1.data_type AS data_type1, t2.data_type AS data_type2

FROM information_schema.columns t1

JOIN information_schema.columns t2

  ON t1.table_schema = @db1

  AND t2.table_schema = @db2

  AND t1.table_name = t2.table_name

  AND t1.column_name = t2.column_name

  AND t1.data_type <> t2.data_type;

-- 4. Display columns not existing on DB2

SELECT @db1 AS database_name, table_name, column_name

FROM information_schema.columns

WHERE table_schema = @db1

  AND table_name NOT IN (

    SELECT table_name

    FROM information_schema.tables

    WHERE table_schema = @db2

  )

UNION

SELECT @db1 AS database_name, table_name, column_name

FROM information_schema.columns

WHERE table_schema = @db1

  AND table_name IN (

    SELECT table_name

    FROM information_schema.tables

    WHERE table_schema = @db2

  )

  AND column_name NOT IN (

    SELECT column_name

    FROM information_schema.columns

    WHERE table_schema = @db2

      AND table_name = table_name

  );

-- 5. Display columns not existing on DB1

SELECT @db2 AS database_name, table_name, column_name

FROM information_schema.columns

WHERE table_schema = @db2

  AND table_name NOT IN (

    SELECT table_name

    FROM information_schema.tables

    WHERE table_schema = @db1

  )

UNION

SELECT @db2 AS database_name, table_name, column_name

FROM information_schema.columns

WHERE table_schema = @db2

  AND table_name IN (

    SELECT table_name

    FROM information_schema.tables

    WHERE table_schema = @db1

  )

  AND column_name NOT IN (

    SELECT column_name

    FROM information_schema.columns

    WHERE table_schema = @db1

      AND table_name = table_name

  );